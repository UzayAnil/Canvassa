<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>The Legend of Canvassa, Part 4: Combat</title>
    <link rel="icon" type="image/vnd.microsoft.icon" href="../favicon.ico"/>
    <script type="text/javascript" src="../dojo.xd.js"></script>
    <script type="text/javascript" src="font.js"></script>

    <style type="text/css">
      @import "../loc.css";
      div.controls {
        top: 280px;
        left: 10px;
      }
    </style>
    <script type="text/javascript">
        function init() {
            var canvas = document.getElementById('map');
            if (canvas.getContext){
                mapCanvas = canvas.getContext('2d');
                mapCanvas.fillStyle = "rgb(0,0,0)";
                mapCanvas.fillRect(0,0, 256, 240);
            } else {
                alert("Can't get a 2d drawing context for this canvas.");
            }
            font.init();
            timerid = setInterval('initWait()', 100);
        }
        function initWait() {
            if (font.initialized) {
                dojo.byId('btnDraw').disabled = false;
                clearInterval(timerid);
            }
        }
        function draw() {
            mapCanvas.fillRect(0,0, 256, 240);
            var text = dojo.byId('txtInput').value;
            font.drawText(mapCanvas, text, 8,8);
        }
    </script>
  </head>
  <body onload="init()">
    <canvas id="map" width="256" height="240"></canvas>
    <div class="controls">
        <div class="controlGroup">
            <textarea id="txtInput" rows="4" cols="40">Continue,

Save,

or Retry?</textarea>
            <button id="btnDraw" disabled="true" onclick="draw();">Draw text</button>
        </div>
    </div>

    <!-- now attach the event handlers -->
    <script type="text/javascript">
        window._scale = 1;
    </script>

  </body>
</html>